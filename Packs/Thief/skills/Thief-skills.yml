# ___________________________________________________________________________
# 
#   ████████████████████████████████████████████████████████████████████████
#   ██                                                                    ██
#   ██                       Thief Pack                                   ██
#   ██                      Created by SkyKiller63                        ██
#   ██                                                                    ██
#   ██   ┌────────────────────────────────────────────────────────┐       ██
#   ██   │ Server Version: Paper 1.21.7+                          │       ██
#   ██   │ MythicMobs Premuim: 5.10.1 (Hard Dependency)           │       ██
#   ██   │ LibsDisguises 11.0.9 (Soft Dependency)                 │       ██
#   ██   └────────────────────────────────────────────────────────┘       ██
#   ██                                                                    ██
#   ██   Description: A simple thief mob that steals your held item       ██
#   ██   and then runs away. Kill it to get the item back!                ██
#   ██   For problems, go to my discord. discord.SkyKillerGames.com       ██
#   ██                                                                    ██
#   ████████████████████████████████████████████████████████████████████████
# ___________________________________________________________________________
#


# Steal Item and Run Away 
Thief-Steal:
  Cooldown: 20
  Skills:
  # Grabs the players held-item itemstack and sets the amount to 1
  - setvar{var=caster.StolenItem;type=ITEM;val=<target.item.itemstack.HAND>} @trigger
  - setvar{var=caster.StolenItem;type=ITEM;val=<caster.var.StolenItem.withAmount.1>}

  # Steal and Equip the 1 item
  - equip{i=itemvariable{variable=caster.StolenItem} HAND}
  - takeitem{var=caster.StolenItem} @trigger
  - sound{s=item.armor.equip_iron;p=1.25;audience=nearby}
  - e:p{p=cloud;a=60;hs=1;vs=1} @selflocation{y=1.5}
  - e:p{p=squid_ink;a=40;hs=1;vs=1} @selflocation{y=1.5}

  # Message Taunt
  - randommessage{m=
    "<#397511>Thief<#a1ac9a><&co> Now <i>that<&sq>s</i> mine. Thanks for the <#f3f736><caster.var.StolenItem.name></#f3f736><&cm> <#7aff22><target.name></#7aff22>.",
    "<#397511>Thief<#a1ac9a><&co> Eyes up<&cm> pockets empty. I<&sq>ll be keeping that <#f3f736><caster.var.StolenItem.name></#f3f736>.",
    "<#397511>Thief<#a1ac9a><&co> Light fingers, heavy prizes. <#f3f736><caster.var.StolenItem.name></#f3f736> has a new owner."
    } @trigger 

  # Run Away
  - runaigoalselector{goal=clear} 
  - runaigoalselector{goal=fleeplayers} 


# Drop the item or not. 20% chance to fail
Thief-Drop:
  Skills:
  - randomskill{skills=ThiefDrop-Success 80,ThiefDrop-Fail 20}

ThiefDrop-Success:
  Skills:
  - randommessage{m=
    "<#397511>Thief<#a1ac9a><&co> Curse you<&cm> <#7aff22><target.name></#7aff22>... Take <#f3f736><caster.var.StolenItem.name></#f3f736> back!",
    "<#397511>Thief<#a1ac9a><&co> You win this round<&cm> <#7aff22><target.name></#7aff22>. The <#f3f736><caster.var.StolenItem.name></#f3f736> is yours."
    } @trigger
  # drops the item on the ground
  - giveitem{var=caster.StolenItem} @selflocation
  - sound{s=entity.villager.no;p=0.69;audience=nearby}


ThiefDrop-Fail:
  Skills:
  - randommessage{m=
    "<#397511>Thief<#a1ac9a><&co> Ha!<#7aff22><target.name></#7aff22>... You<&sq>ll never find the <#f3f736><caster.var.StolenItem.name></#f3f736> again.",
    "<#397511>Thief<#a1ac9a><&co> My secret<&sq>s safe. The <#f3f736><caster.var.StolenItem.name></#f3f736> is lost to you."
    } @trigger
  - sound{s=entity.villager.yes;p=0.69;audience=nearby}












